# 1차 정규형

도메인이 원자값.

<br>

# 2차 정규형

완전 종속을 만족하고, 부분 종속 xx
기본키가 2개 이상의 컬럼으로 구성된 복합키 일 때
다른 컬럼이 기본키의 부분만 보고 결정이 되면 안된다.

ex) 아래 테이블에서는 나이는 학생 이름만 보고 결정이 된다.
기본키 = 학생이름 + 과목
나이가 학생이름과 과목 두개를 합쳤을때 결정이 되야 한다.

학생이름 | 나이 | 과목

A　　　　　15　생물

A　　　　　15　수학

B　　　　　14　수학

C　　　　　17　수학

<br>

# 3차 정규형

기본키 이외의 다른 컬럼이 그 외 다른 컬럼을 결정하면 안된다.
아래 테이블에서 학생 ID가 기본 키라고 하면
시/도, 동 이라는 컬럼은 학생 ID로도 결정이 되고 우편번호로도 결정이 된다.
우편번호는 이 테이블의 기본 키가 아님에도 불구하고
시/도, 동 이라는 컬럼을 결정하고 있다.
이 상황에서 테이블을 나누는게 3차 정규화

학생ID | 학생이름 | 우편번호 | 시/도 | 동 |

<br>

# 트랜젝션

데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위

ACID
원자성, 일관성, 독립성, 지속성

1. 원자성(Atomicity) : 트랜젝션이 DB 에 모두 반영되거나 모두 반영되지 않거나 반드시 둘 중 하나.

2. 일관성(Consitancy) : 트랜젝션의 처리 결과는 일관적이어야 한다.

3. 독립성(Isolation) : 둘 이상의 트랜젝션이 동시에 실행되고 있을때, 어떤 한 트랜젝션이 다른 트랜젝션의 연산에 끼어들 수 없다.

4. 지속성(Durablility) : 트랜젝션이 성공적으로 완료되었다면, 결과는 영구적으로 반영되어야 한다.


SQLite 는 기본적으로 AUTOCOMMIT 이 default 설정 - DB에 바로 반영
BEGIN 키워드를 사용하면, AUTOCOMMIT 이 되지 않는다.
ROLLBACK 키워드는 트랜젝션 중간에 진행했던 작업 내역들 모두 버리고 트랜젝션의 시작 상태로 돌아가는 것
COMMIT 키워드는 트랜젝션 완료, 트랜젝션 중간에 진행했던 작업 내역들을 모두 DB에 반영

```sql
BEGIN;
    DELETE FROM ...

    UPDATE FROM ...
-- 이 시점에서 작업 내역들을 모두 되돌리고 싶다.
ROLLBACK;
BEGIN;
    INSERT INTO ...

    DELETE FROM ...
-- 이 시점에서 작업 내역들을 모두 DB에 반영하고 싶다.
COMMIT;
```
